# 浏览器输入域名分析

```
会解析www.google.com

得到一个ip地址

然后向这个ip地址发起tcp握手

连接成功后，进行tls密钥交换

建立tls加密隧道

然后是正常的http请求

获取到response后，去render html

解析过程中，html中的其他资源重复上述过程

解释执行js的过程中，有其他网络请求也重复上述过程
```



1. **DNS解析：**
   - 用户输入域名后，浏览器首先会尝试解析该域名，以获取对应的IP地址。
   - DNS（Domain Name System）是负责将域名转换为IP地址的系统。浏览器会向本地DNS服务器发送请求，如果本地DNS服务器缓存中有该域名的IP地址，则直接返回；否则，它会向更高级别的DNS服务器发送查询请求，直到找到对应的IP地址。
2. **获取IP地址：**
   - 一旦通过DNS解析获得IP地址，浏览器就知道要连接的服务器的网络位置。
3. **TCP连接建立：**
   - 使用TCP（Transmission Control Protocol）协议，浏览器尝试与服务器建立连接。
   - 这通常涉及“三次握手”过程：
     - 客户端发送一个SYN包到服务器，请求建立连接。
     - 服务器收到SYN包后，回复一个SYN-ACK包，确认收到连接请求。
     - 客户端收到SYN-ACK包后，发送一个ACK包，确认连接建立。
   - 一旦TCP连接建立成功，浏览器和服务器之间就可以进行可靠的数据传输。
4. **TLS握手（如果适用）：**
   - 如果网站使用HTTPS协议（即加密的HTTP），那么在建立TCP连接之后，会进行TLS握手过程。
   - TLS握手的主要目的是协商加密参数，并在客户端和服务器之间建立安全的加密连接。
   - 这个过程包括交换加密套件信息、生成预主密钥、生成会话密钥和验证对方身份等步骤。
   - 一旦TLS握手完成，后续的HTTP通信都会在这个加密连接上进行。
5. **HTTP请求：**
   - 在TCP连接（或TLS加密连接）建立之后，浏览器会向服务器发送HTTP请求。
   - HTTP请求通常包括请求行（如GET /index.html HTTP/1.1）、请求头部（如Host、User-Agent等）和请求体（对于POST请求）。
6. **HTTP响应：**
   - 服务器收到HTTP请求后，会处理请求并返回HTTP响应。
   - HTTP响应包括状态码（如200 OK）、响应头部（如Content-Type、Content-Length等）和响应体（即网页内容）。
   - 浏览器收到HTTP响应后，会解析响应内容，并将其展示给用户。